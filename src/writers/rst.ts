import BaseWriter from '../Writer';
import { GenericNodeVisitor, SkipChildren } from '../nodes';
import { defaultSections } from './rstConfig';
import {Settings} from "../../gen/Settings";
import {Document, IElement, INode} from "../types";

/* eslint-disable-next-line no-console */
console.log = process.stderr.write;

/* eslint-disable-next-line no-unused-vars */
const __version__ = '';
/* eslint-disable-next-line no-unused-vars */
const __docformat__ = 'reStructuredText';

/**
 * Translator class for Pojo writer
 */
class RSTTranslator extends GenericNodeVisitor {
    private lines: string[];
    private indent: number;
    private curLine: string;
    private sectionNum: number;
    private ancestors: any[];
    private level: number;
    private root: any | undefined;
    private output: any;
    private settings: Settings;
    private warn: OmitThisParameter<(...args: any[]) => INode>;
    private inSimple: number;
    private fixedText: number;
    private error: OmitThisParameter<(...args: any[]) => INode>;
    /**
     * Create a RSTTranslator
     * @param {nodes.document} document - the document to translate
     */
    constructor(document: Document) {
        super(document);
        if (!defaultSections) {
            throw new Error();
        }
        this.ancestors = [];
        this.document = document;
        this.lines = [];
        this.indent = 0;
        this.sectionNum = 0;
        if (!this.document.reporter) {
            throw new Error('document has no reporter');
        }
        this.warn = this.document.reporter.warning.bind(this.document.reporter);
        this.error = this.document.reporter.error.bind(this.document.reporter);

        this.settings = document.settings;
        this.level = 0;
        this.inSimple = 0;
        this.fixedText = 0;
        this.output = {};
        this.curLine = '';
    }

    /* eslint-disable-next-line camelcase */
    default_visit(node: INode) {
        if (node.tagname && (<IElement>node).attlist) {
            const me = [node.tagname, (<IElement>node).attlist(), []];
//            console.log(me);
            this.ancestors.push(me);
            this.level += 1;
        } else {
//            console.log(node.astext());
        }

        //      console.log(this.level);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars */
    default_departure(node: INode) {
        const me = this.ancestors.pop();
        if (this.level === 1) {
            this.root = me;
            //          console.log(JSON.stringify(me));
        } else {
            const parent = this.ancestors[this.ancestors.length - 1];
            parent[2].push(me);
        }
        this.level -= 1;
    }

    /* eslint-disable-next-line camelcase */
    visit_Text(node: INode) {
        this.default_visit(node);
        this.ancestors[this.ancestors.length - 1][2].push(node.astext());
        this.curLine += node.astext();
        //      const text = escapeXml(node.astext())
        //      this.output.push(text);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars */
    depart_Text(node: INode) {
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_header(node: INode) {
        /* I believe this is typically generated by a transform. */
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_header(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_footer(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_footer(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_decoration(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_decoration(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_document(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_document(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_docinfo(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_docinfo(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_authors(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_authors(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_section(node: INode) {
        this.sectionNum += 1;
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_section(node: INode) {
        this.sectionNum -= 1;
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_topic(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_topic(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_sidebar(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_sidebar(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_transition(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_transition(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_compound(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_compound(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_container(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_container(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_bullet_list(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_bullet_list(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_enumerated_list(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_enumerated_list(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_list_item(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_list_item(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_definition_list(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_definition_list(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_definition_list_item(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_definition_list_item(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_definition(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_definition(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_field_list(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_field_list(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_field(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_field(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_field_body(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_field_body(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_option(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_option(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_option_group(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_option_group(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_option_list(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_option_list(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_option_list_item(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_option_list_item(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_description(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_description(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_line_block(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_line_block(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_block_quote(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_block_quote(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_attention(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_attention(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_caution(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_caution(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_danger(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_danger(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_error(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_error(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_important(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_important(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_note(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_note(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_tip(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_tip(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_hint(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_hint(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_warning(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_warning(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_admonition(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_admonition(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_footnote(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_footnote(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_citation(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_citation(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_figure(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_figure(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_legend(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_legend(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_table(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_table(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_tgroup(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_tgroup(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_colspec(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_colspec(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_thead(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_thead(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_tbody(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_tbody(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_row(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_row(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_entry(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_entry(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_system_message(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_system_message(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_pending(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_pending(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_image(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_image(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_title(node: INode) {
        this.default_visit(node);
        this.newLine();
        const title = node.astext();
//        console.log(this.sectionNum);
        const sectSpec = defaultSections[this.sectionNum - 1];
        let index = 0;
        if (sectSpec.length === 2) {
            this.addLine(sectSpec[index].repeat(title.length));
            index += 1;
        }
        this.addLine(title);
        this.addLine(sectSpec[index].repeat(title.length));
        this.newLine(true);
        throw new SkipChildren();
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_title(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_subtitle(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_subtitle(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_rubric(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_rubric(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_author(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_author(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_organization(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_organization(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_contact(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_contact(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_version(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_version(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_revision(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_revision(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_status(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_status(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_date(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_date(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_copyright(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_copyright(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_paragraph(node: INode) {
        this.default_visit(node);
        this.newLine(true);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_paragraph(node: INode) {
        this.default_departure(node);
        this.newLine(true);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_term(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_term(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_classifier(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_classifier(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_field_name(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_field_name(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_option_argument(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_option_argument(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_option_string(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_option_string(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_line(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_line(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_attribution(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_attribution(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_substitution_definition(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_substitution_definition(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_target(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_target(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_label(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_label(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_caption(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_caption(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_emphasis(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_emphasis(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_strong(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_strong(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_literal(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_literal(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_reference(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_reference(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_footnote_reference(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_footnote_reference(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_citation_reference(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_citation_reference(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_substitution_reference(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_substitution_reference(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_title_reference(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_title_reference(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_abbreviation(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_abbreviation(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_acronym(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_acronym(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_superscript(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_superscript(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_subscript(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_subscript(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_math(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_math(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_inline(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_inline(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_problematic(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_problematic(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_generated(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_generated(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_address(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_address(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_literal_block(node: INode) {
        this.default_visit(node);
        const lastLine = this.getLastLine();
        if (lastLine.endsWith(':')) {
            this.lines[this.lines.length - 1] += ':';
        }
        this.indent += 4;
        if (!this.curLine.trim()) {
            this.curLine = ' '.repeat(this.indent);
        }
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_literal_block(node: INode) {
        this.default_departure(node);
        this.newLine(true);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_doctest_block(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_doctest_block(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_math_block(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_math_block(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_comment(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_comment(node: INode) {
        this.default_departure(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    visit_raw(node: INode) {
        this.default_visit(node);
    }

    /* eslint-disable-next-line camelcase,no-unused-vars,class-methods-use-this */
    depart_raw(node: INode) {
        this.default_departure(node);
    }

    newLine(allowBlankLine: boolean = false) {
        if (this.curLine || allowBlankLine) {
            this.lines.push(this.curLine);
        }
        this.curLine = ' '.repeat(this.indent);
    }

    addLine(line: string) {
        if (this.curLine) {
            throw new Error();
        }
        this.lines.push(' '.repeat(this.indent) + line);
    }

    getLastLine() {
        return this.lines[this.lines.length - 1];
    }
}

/**
 * Writer class for POJOWriter
 */
class RSTWriter extends BaseWriter {
    private visitor: any;
    private translatorClass: any;
    /**
     * Create POJOWriter
     * @param {Object} args - Arguments, none right now
     */
    constructor() {
        super();
        this.translatorClass = RSTTranslator;
    }

    /**
     * Translate the document to plain old javascript object
     */
    translate() {
        const TranslatorClass = this.translatorClass;
        const visitor = new TranslatorClass(this.document);
        this.visitor = visitor;
        this.document!.walkabout(visitor);
        this.output = visitor.lines;
    }
}

/*POJOWriter.settingsSpec = [
    '"Docutils-js POJO" Writer Options',
    null,
    []];

 */
export default RSTWriter;
